function CreateUpdate(){async function a(a){let b=[...i];const c=await axios.get(`/file/api/get_assetfiles/${a}/`);for(let d of c.data.data){let a=await fetch(d.url),c=await a.blob();c.filename=d.filename,b.push({blob:c,url:URL.createObjectURL(c)})}j(b)}async function b(a){const b=new FormData;b.append("name",k.name);for(let c of i)b.append("file",c.blob,c.blob.filename);try{const c=await axios.post(a,b);window.location.href=c.data.redirect}catch(a){f(a.response.data.message),n(!0)}}function c(a){let b=[...i];for(let c in b)if(c==a)return b.splice(c,1),void j(b)}const[d,f]=React.useState(),[g,h]=React.useState(),[i,j]=React.useState([]),[k,l]=React.useState(),[m,n]=React.useState(!0),o=React.createRef();return React.useEffect(()=>{axios.defaults.xsrfCookieName="csrftoken",axios.defaults.xsrfHeaderName="X-CSRFToken";const b=window.asset?1:0;return l(window.asset),h(b),1==b&&a(window.asset.id),()=>{for(let a of i)URL.revokeObjectURL(a.url)}},[]),/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement("form",{onSubmit:function(a){f(),n(!1),a.preventDefault(),0==g?b("/asset/api/create/"):b(`/asset/api/update/${k.id}/`)}/*className="needs-validation" noValidate*/},d&&/*#__PURE__*/React.createElement("div",{className:"alert alert-danger"},d),/*#__PURE__*/React.createElement("div",{className:"mb-3"},/*#__PURE__*/React.createElement("label",{for:"name"},"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0430\u043A\u0442\u0438\u0432\u0430"),/*#__PURE__*/React.createElement("input",{type:"text",id:"name",name:"name",className:"form-control",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0430\u043A\u0442\u0438\u0432\u0430",autocomplete:"autocomplete_off_randString",required:!0,value:k&&k.name,onChange:function(a){l(b=>{const c={...b,name:a.target.value};return c})}})),/*#__PURE__*/React.createElement("div",{className:"mb-3"},/*#__PURE__*/React.createElement("h4",{className:"mb-3"},"\u0424\u043E\u0442\u043E\u0433\u0440\u0430\u0444\u0438\u0438"),/*#__PURE__*/React.createElement("div",{className:`row ${i.length?"mb-3":""}`},/*#__PURE__*/React.createElement("input",{ref:o,type:"file",name:"hidden_files",accept:"image/*",multiple:!0,hidden:!0,onChange:function(a){const b=[...i];for(let c of a.target.files)b.push({blob:c,url:URL.createObjectURL(c)});j(b),o.current.value=null}}),i.map((a,b)=>/*#__PURE__*/React.createElement("div",{key:b,className:"col-md-4"},/*#__PURE__*/React.createElement("div",{className:"card box-shadow text-right h-100"},/*#__PURE__*/React.createElement("img",{src:a.url,className:"card-img"}),/*#__PURE__*/React.createElement("div",{className:"card-img-overlay"},/*#__PURE__*/React.createElement("div",{className:"btn-group"},/*#__PURE__*/React.createElement("button",{type:"button",onClick:()=>c(b),className:"btn btn-sm btn-danger"},"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"))))))),/*#__PURE__*/React.createElement("button",{type:"button",className:"btn btn-primary",onClick:()=>o.current.click()},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C ",!!i.length&&"\u0435\u0449\u0451 ","\u0444\u043E\u0442\u043E"),/*#__PURE__*/React.createElement("hr",null),/*#__PURE__*/React.createElement("button",{type:"submit",className:"btn btn-success",disabled:!m},"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"))))}ReactDOM.render(/*#__PURE__*/React.createElement(CreateUpdate,null),document.querySelector("#react_app"));