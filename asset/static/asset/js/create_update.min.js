function CreateUpdate(){async function a(a){let b=[...f];const c=await axios.get(`/file/api/get_assetfiles/${a}/`);for(let d of c.data.data){let a=await fetch(d.url),c=await a.blob();c.filename=d.filename,b.push({blob:c,url:URL.createObjectURL(c)})}g(b)}async function b(a){const b=new FormData;b.append("name",h.name);for(let c of f)b.append("file",c.blob,c.blob.filename);const c=await axios.post(a,b);window.location.href=c.data.redirect}function c(a){let b=[...f];for(let c in b)if(c==a)return b.splice(c,1),void g(b)}const[d,e]=React.useState(),[f,g]=React.useState([]),[h,i]=React.useState(),[j,k]=React.useState(!0),l=React.createRef();return React.useEffect(()=>{axios.defaults.xsrfCookieName="csrftoken",axios.defaults.xsrfHeaderName="X-CSRFToken";const b=window.asset?1:0;return i(window.asset),e(b),1==b&&a(window.asset.id),()=>{for(let a of f)URL.revokeObjectURL(a.url)}},[]),/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement("form",{onSubmit:function(a){a.preventDefault(),k(!1),0==d?b("/asset/api/create/"):b(`/asset/api/update/${h.id}/`)},autocomplete:"off"},/*#__PURE__*/React.createElement("div",{className:"form-group"},/*#__PURE__*/React.createElement("label",{for:"name"},"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0430\u043A\u0442\u0438\u0432\u0430"),/*#__PURE__*/React.createElement("input",{type:"text",id:"name",name:"name",className:"form-control",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0430\u043A\u0442\u0438\u0432\u0430",required:!0,value:h&&h.name,onChange:function(a){i(b=>{const c={...b,name:a.target.value};return c})}})),/*#__PURE__*/React.createElement("div",{class:"form-group"},/*#__PURE__*/React.createElement("h4",{class:"mb-3"},"\u0424\u043E\u0442\u043E\u0433\u0440\u0430\u0444\u0438\u0438"),/*#__PURE__*/React.createElement("div",{className:`row ${f.length?"mb-3":""}`},/*#__PURE__*/React.createElement("input",{ref:l,type:"file",name:"files",accept:"image/*",multiple:!0,hidden:!0,onChange:function(a){const b=[...f];for(let c of a.target.files)b.push({blob:c,url:URL.createObjectURL(c)});g(b),l.current.value=null}}),f.map((a,b)=>/*#__PURE__*/React.createElement("div",{key:b,className:"col-md-4"},/*#__PURE__*/React.createElement("div",{className:"card box-shadow text-right h-100"},/*#__PURE__*/React.createElement("img",{src:a.url,class:"card-img"}),/*#__PURE__*/React.createElement("div",{class:"card-img-overlay"},/*#__PURE__*/React.createElement("div",{class:"btn-group"},/*#__PURE__*/React.createElement("button",{type:"button",onClick:()=>c(b),class:"btn btn-sm btn-danger"},"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"))))))),/*#__PURE__*/React.createElement("button",{type:"button",class:"btn btn-primary",onClick:()=>l.current.click()},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C ",!!f.length&&"\u0435\u0449\u0451 ","\u0444\u043E\u0442\u043E"),/*#__PURE__*/React.createElement("hr",null),/*#__PURE__*/React.createElement("button",{type:"submit",class:"btn btn-success",disabled:!j},"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"))))}ReactDOM.render(/*#__PURE__*/React.createElement(CreateUpdate,null),document.querySelector("#react_app"));