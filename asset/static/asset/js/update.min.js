function Update(){function a(a){const b=a?{enabled:!0,caption:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"}:{enabled:!1,caption:"\u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435..."};j(b)}async function b(b){j({enabled:!1,caption:"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430..."});try{let a=[...e];const c=await axios.get(`/file/api/get_assetfiles/${b}/`);for(let b of c.data.data){let c=await fetch(b.url),d=await c.blob();d.filename=b.filename,a.push({blob:d,url:URL.createObjectURL(d)})}f(a)}finally{a(!0)}}const[c,d]=React.useState(),[e,f]=React.useState([]),[g,h]=React.useState(),[i,j]=React.useState({enabled:!0,caption:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"}),k=React.useRef();return useAxios(),React.useEffect(()=>(h(window.asset),b(window.asset.id),()=>{for(let a of e)URL.revokeObjectURL(a.url)}),[]),/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement("form",{ref:k,onSubmit:async function(b){b.preventDefault(),d(),a(!1);try{const a=new FormData(k.current);for(let b of e)a.append("file",b.blob,b.blob.filename);const b=await axios.post(`/asset/api/update/${g.id}/`,a);window.location.href=b.data.redirect}catch(b){window.scrollTo(0,0),d(b.response.data.message||b.response.data),a(!0)}},className:"needs-validation",noValidate:!0},c&&/*#__PURE__*/React.createElement("div",{className:"alert alert-danger"},c),/*#__PURE__*/React.createElement("h4",{className:"mb-3"},"\u041E\u0441\u043D\u043E\u0432\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F"),/*#__PURE__*/React.createElement("div",{className:"form-floating mb-3"},/*#__PURE__*/React.createElement("input",{type:"text",id:"name",name:"name",className:"form-control",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0430\u043A\u0442\u0438\u0432\u0430",autocomplete:"false","aria-describedby":"invalidInputName",required:!0,value:g&&g.name,onChange:function(a){h(b=>{const c={...b,name:a.target.value};return c})}}),/*#__PURE__*/React.createElement("label",{for:"name"},"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0430\u043A\u0442\u0438\u0432\u0430"),/*#__PURE__*/React.createElement("div",{class:"invalid-tooltip"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0430\u043A\u0442\u0438\u0432\u0430")),/*#__PURE__*/React.createElement("div",{className:"mb-3"},/*#__PURE__*/React.createElement("h4",{className:"mb-3"},"\u0424\u043E\u0442\u043E\u0433\u0440\u0430\u0444\u0438\u0438"),/*#__PURE__*/React.createElement(FilesList,{files:e,onFilesAdd:async function(a){const b=[...e];for(let c of a)b.push({blob:c,url:URL.createObjectURL(c)});f(b)},onFileDelete:function(a){let b=[...e];URL.revokeObjectURL(b[a].url),b.splice(a,1),f(b)}}),/*#__PURE__*/React.createElement("hr",null),/*#__PURE__*/React.createElement("div",{className:"row g-3"},/*#__PURE__*/React.createElement("div",{className:"col-auto"},/*#__PURE__*/React.createElement("button",{type:"submit",className:"btn btn-outline-success",disabled:!i.enabled},i.caption)),/*#__PURE__*/React.createElement("div",{className:"col-auto"},/*#__PURE__*/React.createElement("button",{type:"button",className:"btn btn-outline-danger","data-bs-toggle":"modal","data-bs-target":"#confirmDeleteModal"},"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"))))),/*#__PURE__*/React.createElement("div",{id:"confirmDeleteModal",className:"modal",tabindex:"-1",role:"dialog","aria-labelledby":"confirmDeletionModalLabel",style:{display:"none"}},/*#__PURE__*/React.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},/*#__PURE__*/React.createElement("div",{className:"modal-content"},/*#__PURE__*/React.createElement("div",{className:"modal-header"},/*#__PURE__*/React.createElement("h5",{className:"modal-title",id:"confirmDeletionModalLabel"},"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u043A\u0442\u0438\u0432\u0430"),/*#__PURE__*/React.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),/*#__PURE__*/React.createElement("div",{className:"modal-body"},/*#__PURE__*/React.createElement("p",null,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0430\u043A\u0442\u0438\u0432?")),/*#__PURE__*/React.createElement("div",{className:"modal-footer"},/*#__PURE__*/React.createElement("button",{id:"btnConfirmDelete",type:"button",className:"btn btn-danger",onClick:async function(a){a.preventDefault(),$("#confirmDeleteModal").modal("hide");try{await axios.post(`/asset/api/delete/${g.id}/`),window.location.href="/asset/"}catch(a){showErrorToast(a.response.data.message||a.response.data)}}},"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"),/*#__PURE__*/React.createElement("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal"},"\u041E\u0442\u043C\u0435\u043D\u0430"))))),/*#__PURE__*/React.createElement("div",{className:"toast-container position-absolute p-3 top-0-header start-50 translate-middle-x"},/*#__PURE__*/React.createElement("div",{id:"toast",className:"toast align-items-center text-white border-0",role:"alert","aria-live":"assertive","aria-atomic":"true"},/*#__PURE__*/React.createElement("div",{className:"d-flex"},/*#__PURE__*/React.createElement("div",{className:"toast-body"}),/*#__PURE__*/React.createElement("button",{type:"button",class:"btn-close btn-close-white me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"})))))}ReactDOM.render(/*#__PURE__*/React.createElement(Update,null),document.querySelector("#react_app"));