{% extends 'main.html' %}

{% load boat_extras %}
{% load static %}

{% block title %}Подтверждение бронирования{% endblock %}

{% block content %}
    <div class="container-lg" style='margin-bottom: calc(70px + 1rem)'>
        <section class="jumbotron text-center">
            <h1 class="jumbotron-heading">Подтверждение бронирования</h1>    
        </section>

        {% if errors %}
            <div class="alert alert-danger">{{ errors|safe }}</div>
        {% endif %}

        <h4>Стоимость</h4>
        <p>{{ total_sum }}&nbsp;₽</p>    

        <h4>Период</h4>
        <p>с {{ start_date }} по {{ end_date }}</p>
        
        <h4>Продолжительность</h4>
        <p>{{ days|daycountcase }}</p>

        {% if boat.prepayment_required %}
            <h4>Дополнительная информация</h4>
            <p>{{ boat.prepayment_required|yesno:'Требуется предоплата,Предоплата не требуется' }}</p>
        {% endif %}

        {% include 'booking/spec.html' %}

        <h4>Лодка</h4>
        {% include 'boat/view_base.html' %}   

    </div>
    <div class="fixed-bottom bg-light py-3">
        <div class="container-lg">
            <div class="row g-2">
                <div class="col col-lg-auto">
                    <form method="post" action="{% url 'booking:create' %}">
                        {% csrf_token %}
                        <input type="hidden" name="boat_pk" value="{{ boat.pk }}" />
                        <input type="hidden" name="start_date" value="{{ start_date.isoformat }}" />
                        <input type="hidden" name="end_date" value="{{ end_date.isoformat }}"  />
                        <input type="hidden" name="calculated_data" value="{{ calculated_data }}" />
                        <button type="submit" class="btn btn-primary w-100">Забронировать</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock  %}