{% extends 'main.html' %}

{% load static %}

{% block title %}Бронирование лодки{% endblock %}

{% block content %}
    <script type="text/javascript">
        var boatId = {{ boat.pk }}
            firstPriceDate = new Date('{{ first_price_date.isoformat }}'),
            lastPriceDate = new Date('{{ last_price_date.isoformat }}'),
            priceRanges = []

        {% for price_range in price_ranges %}
            priceRanges.push({
                startDate: new Date(new Date('{{ price_range.0.isoformat }}').toDateString()),
                endDate: new Date(new Date('{{ price_range.1.isoformat }}').toDateString())
            })
        {% endfor %}
    </script>

    <script type="text/javascript" src="{% static 'boat/js/booking.min.js' %}"></script>
    {% include 'daterangepicker.html' %}

    <div class="container-lg">
        <section class="jumbotron text-center">
            <h1 class="jumbotron-heading">Бронирование лодки</h1>    
        </section>

        {% include 'boat/view_base.html' %}
        
        <h4 class="mb-3">Бронирование</h4>
        {% if prices_exist %}
            <div class="row gy-3 mb-3 ">
                <div class="col-lg-auto">
                    <div class="form-floating">                 
                        <input id="bookingdaterangepicker" type="text" class="form-control" placeholder="Укажите период" required />
                        <label>Период</label>
                        <div class="invalid-tooltip">Укажите период</div>
                    </div>
                </div>
                <div class="col-12">
                    <div id="priceAlert" class="alert alert-secondary text-center">
                        <h5>Для расчета цены выберите период</h5>
                    </div>
                </div>
            </div>
        {% else %}
            <div class="text-danger mb-3">Нет расценок</div>
        {% endif %}
    </div>
{% endblock  %}