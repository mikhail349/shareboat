{% load l10n %}
{% load static %}
{% load boat_extras %}

{% include 'leaflet.html' %}

{% if boat.files.exists %}
    <div class="card box-shadow text-end mb-3">
        {% if boat.files.count > 1 %}  
            <div id="fileCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="false" data-bs-touch="true">
                <ol class="carousel-indicators">
                    {% for file in boat.files.all %} 
                        <li data-bs-target="#fileCarousel{{forloop.parentloop.counter0}}" data-bs-slide-to="{{ forloop.counter0 }}" {% if forloop.counter0 == 0  %} class="active"> {% endif %}</li>
                    {% endfor %}
                </ol> 
                <div class="carousel-inner">
                    {% for file in boat.files.all %} 
                        <div class="carousel-item {% if forloop.counter0 == 0  %}active{% endif %}">
                            <img class="d-block w-100 rounded carousel-img" src="{{ file.file.url }}" />
                        </div>
                    {% endfor %}
                </div>
                <button type="button" class="carousel-control-prev" data-bs-target="#fileCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button type="button" class="carousel-control-next" data-bs-target="#fileCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        {% elif boat.files.exists %}
            <img class="carousel-img rounded" src="{{ boat.files.first.file.url }}" />
        {% endif %}
    </div>           
{% endif %}
<h2>{{ boat.name }}</h2>   
<h4 class="text-muted">{{ boat.get_type_display }}</h4>   

{% include 'boat/location.html' %}
<div class="mt-3">{{ boat.text|default_if_none:""|linebreaks }}</div>
{% include 'modal_map.html' %}