$(document).ready(()=>{$("form").on("input",()=>{const a=$("form input[name=length]"),b=$("form input[name=length] ~ .invalid-tooltip"),c=999<a.val()?"\u041B\u043E\u0434\u043E\u043A \u0442\u0430\u043A\u043E\u0439 \u0434\u043B\u0438\u043D\u044B \u043D\u0435 \u0431\u044B\u0432\u0430\u0435\u0442...":"";a[0].setCustomValidity(c),c&&b.text(c),a.val().length||b.text("\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0434\u043B\u0438\u043D\u0443 \u043B\u043E\u0434\u043A\u0438")})});function BoatForm(a){function b(a){const b=a.target.getAttribute("name");g(c=>{const d={...c};return d[b]=a.target.value,d})}const[c,d]=React.useState([]),[f,g]=React.useState(),h=React.useRef();return useAxios(),React.useEffect(()=>(a.boat&&g(a.boat),()=>{for(let a of c)URL.revokeObjectURL(a.url)}),[]),React.useEffect(()=>{a.files&&d(a.files)},[a.files]),/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement("form",{ref:h,onSubmit:function(b){b.preventDefault(),a.onSave({boat:f,files:c})},className:"needs-validation",noValidate:!0},a.errors&&/*#__PURE__*/React.createElement("div",{className:"alert alert-danger"},a.errors),/*#__PURE__*/React.createElement("h4",{className:"mb-3"},"\u041E\u0441\u043D\u043E\u0432\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F"),/*#__PURE__*/React.createElement("div",{className:"form-floating mb-3"},/*#__PURE__*/React.createElement("input",{type:"text",id:"name",name:"name",className:"form-control",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043B\u043E\u0434\u043A\u0438",autocomplete:"false","aria-describedby":"invalidInputName",required:!0,value:f&&f.name,onChange:function(a){g(b=>{const c={...b,name:a.target.value};return c})}}),/*#__PURE__*/React.createElement("label",{for:"name"},"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043B\u043E\u0434\u043A\u0438"),/*#__PURE__*/React.createElement("div",{class:"invalid-tooltip"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043B\u043E\u0434\u043A\u0438")),/*#__PURE__*/React.createElement("div",{className:"row"},/*#__PURE__*/React.createElement("div",{className:"col-auto"},/*#__PURE__*/React.createElement("div",{className:"form-floating mb-3"},/*#__PURE__*/React.createElement("input",{type:"number",name:"length",className:"form-control",placeholder:"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0434\u043B\u0438\u043D\u0443 \u043B\u043E\u0434\u043A\u0438",autocomplete:"false",step:"any",required:!0,value:f&&f.length,onChange:b}),/*#__PURE__*/React.createElement("label",{for:"length"},"\u0414\u043B\u0438\u043D\u0430, \u043C."),/*#__PURE__*/React.createElement("div",{class:"invalid-tooltip"},"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0434\u043B\u0438\u043D\u0443 \u043B\u043E\u0434\u043A\u0438"))),/*#__PURE__*/React.createElement("div",{className:"col-auto"},/*#__PURE__*/React.createElement("div",{className:"form-floating mb-3"},/*#__PURE__*/React.createElement("input",{type:"number",name:"width",className:"form-control",placeholder:"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0448\u0438\u0440\u0438\u043D\u0443 \u043B\u043E\u0434\u043A\u0438",autocomplete:"false",required:!0,value:f&&f.width,onChange:b}),/*#__PURE__*/React.createElement("label",{for:"length"},"\u0428\u0438\u0440\u0438\u043D\u0430, \u043C."),/*#__PURE__*/React.createElement("div",{class:"invalid-tooltip"},"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0448\u0438\u0440\u0438\u043D\u0443 \u043B\u043E\u0434\u043A\u0438"))),/*#__PURE__*/React.createElement("div",{className:"col-auto"},/*#__PURE__*/React.createElement("div",{className:"form-floating mb-3"},/*#__PURE__*/React.createElement("input",{type:"number",name:"draft",className:"form-control",placeholder:"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u043E\u0441\u0430\u0434\u043A\u0443 \u043B\u043E\u0434\u043A\u0438",autocomplete:"false",required:!0,value:f&&f.draft,onChange:b}),/*#__PURE__*/React.createElement("label",{for:"length"},"\u041E\u0441\u0430\u0434\u043A\u0430, \u043C."),/*#__PURE__*/React.createElement("div",{class:"invalid-tooltip"},"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u043E\u0441\u0430\u0434\u043A\u0443 \u043B\u043E\u0434\u043A\u0438")))),/*#__PURE__*/React.createElement("div",{className:"mb-3"},/*#__PURE__*/React.createElement("h4",{className:"mb-3"},"\u0424\u043E\u0442\u043E\u0433\u0440\u0430\u0444\u0438\u0438"),/*#__PURE__*/React.createElement(FilesList,{files:c,onFilesAdd:async function(a){const b=[...c];for(let c of a)b.push({blob:c,url:URL.createObjectURL(c)});d(b)},onFileDelete:function(a){let b=[...c];URL.revokeObjectURL(b[a].url),b.splice(a,1),d(b)}})),/*#__PURE__*/React.createElement("hr",null),a.buttons),/*#__PURE__*/React.createElement("div",{className:"toast-container position-absolute p-3 top-0-header start-50 translate-middle-x"},/*#__PURE__*/React.createElement("div",{id:"toast",className:"toast align-items-center text-white border-0",role:"alert","aria-live":"assertive","aria-atomic":"true"},/*#__PURE__*/React.createElement("div",{className:"d-flex"},/*#__PURE__*/React.createElement("div",{className:"toast-body"}),/*#__PURE__*/React.createElement("button",{type:"button",class:"btn-close btn-close-white me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"})))))}function FilesList(a){function b(){return 0<c}const[c,d]=React.useState(0),f=React.createRef();return/*#__PURE__*/React.createElement("div",{className:`file-upload-wrapper ${b()?"bg-light":""}`,onDragEnter:function(a){a.preventDefault(),d(a=>a+1)},onDragLeave:function(a){a.preventDefault(),d(a=>a-1)},onDrop:function(b){b.preventDefault(),d(0),a.onFilesAdd(b.dataTransfer.files)},onDragOver:a=>a.preventDefault()},/*#__PURE__*/React.createElement("div",{className:"row"},/*#__PURE__*/React.createElement("input",{ref:f,type:"file",name:"hidden_files",accept:"image/*",multiple:!0,hidden:!0,onChange:function(b){a.onFilesAdd(b.target.files),f.current.value=null}}),a.files.map((b,c)=>/*#__PURE__*/React.createElement("div",{key:c,className:"col-md-3 mb-3"},/*#__PURE__*/React.createElement("div",{className:"card box-shadow text-end"},/*#__PURE__*/React.createElement("img",{src:b.url,className:"card-img"}),/*#__PURE__*/React.createElement("div",{className:"card-img-overlay"},/*#__PURE__*/React.createElement("div",{className:"btn-group"},/*#__PURE__*/React.createElement("button",{type:"button",className:"btn btn-sm btn-danger",onClick:()=>a.onFileDelete(c)},"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"))))))),/*#__PURE__*/React.createElement("div",{class:"row align-items-center"},/*#__PURE__*/React.createElement("div",{class:"col-auto"},/*#__PURE__*/React.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>f.current.click()},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C ",!!a.files.length&&"\u0435\u0449\u0451 ","\u0444\u043E\u0442\u043E")),/*#__PURE__*/React.createElement("div",{class:"col-auto"},b()?/*#__PURE__*/React.createElement("span",{className:"text-success"},"\u041E\u0442\u043F\u0443\u0441\u0442\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0444\u043E\u0442\u043E"):!window.isMobile()&&/*#__PURE__*/React.createElement("span",{className:"text-muted"},"\u0418\u043B\u0438 \u043F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0444\u043E\u0442\u043E \u0441\u044E\u0434\u0430"))))}