function Update(){async function a(a){c(!1);try{let b=[];const c=await axios.get(`/boats/api/get_files/${a}/`);for(let a of c.data.data){let c=await fetch(a.url),d=await c.blob();d.filename=a.filename,b.push({blob:d,url:URL.createObjectURL(d)})}e(b)}finally{c(!0)}}const[b,c]=React.useState(!0),[d,e]=React.useState([]);return React.useEffect(()=>(a(window.boat.id),()=>{for(let a of d)URL.revokeObjectURL(a.url)}),[]),/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(BoatForm,{files:d,boat:window?.boat,onSave:async function(a){const{boat:b,files:d}=a;c(!1);try{const a=new FormData;for(let c in b)a.append(c,b[c]);for(let b of d)a.append("file",b.blob,b.blob.filename);const c=await axios.post(`/boats/api/update/${b.id}/`,a);window.location.href=c.data.redirect}catch(a){showErrorToast(a.response.data.message||a.response.data),c(!0)}},buttons:/*#__PURE__*/React.createElement(function(){return/*#__PURE__*/React.createElement("div",{className:"row g-3"},/*#__PURE__*/React.createElement("div",{className:"col-auto"},/*#__PURE__*/React.createElement("button",{type:"submit",className:"btn btn-outline-success",disabled:!b},"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C")),/*#__PURE__*/React.createElement("div",{className:"col-auto"},/*#__PURE__*/React.createElement("button",{type:"button",className:"btn btn-outline-danger","data-bs-toggle":"modal","data-bs-target":"#confirmDeleteModal"},"\u0423\u0434\u0430\u043B\u0438\u0442\u044C")))},null)}),/*#__PURE__*/React.createElement("div",{id:"confirmDeleteModal",className:"modal",tabindex:"-1",role:"dialog","aria-labelledby":"confirmDeletionModalLabel",style:{display:"none"}},/*#__PURE__*/React.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},/*#__PURE__*/React.createElement("div",{className:"modal-content"},/*#__PURE__*/React.createElement("div",{className:"modal-header"},/*#__PURE__*/React.createElement("h5",{className:"modal-title",id:"confirmDeletionModalLabel"},"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435 \u0430\u043A\u0442\u0438\u0432\u0430"),/*#__PURE__*/React.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),/*#__PURE__*/React.createElement("div",{className:"modal-body"},/*#__PURE__*/React.createElement("p",null,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043B\u043E\u0434\u043A\u0443?")),/*#__PURE__*/React.createElement("div",{className:"modal-footer"},/*#__PURE__*/React.createElement("button",{id:"btnConfirmDelete",type:"button",className:"btn btn-danger",onClick:async function(a){a.preventDefault(),$("#confirmDeleteModal").modal("hide");try{await axios.post(`/boats/api/delete/${boat.id}/`),window.location.href="/boats/"}catch(a){showErrorToast(a.response.data.message||a.response.data)}}},"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"),/*#__PURE__*/React.createElement("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal"},"\u041E\u0442\u043C\u0435\u043D\u0430"))))))}ReactDOM.render(/*#__PURE__*/React.createElement(Update,null),document.querySelector("#react_app"));