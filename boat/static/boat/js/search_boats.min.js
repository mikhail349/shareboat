$(document).ready(()=>{const a=new URLSearchParams(window.location.search);var b,c;a.has("dateFrom")&&(b=new Date(a.get("dateFrom"))),a.has("dateTo")&&(c=new Date(a.get("dateTo")));const d=new AirDatepicker("#dpRange",{selectedDates:[b,c],autoClose:!0,isMobile:window.isMobile(),range:!0,minDate:new Date,multipleDatesSeparator:" - "});$("#formSearch").on("submit",function(a){if(2!==d.selectedDates.length)return showErrorToast("\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0435\u0440\u0438\u043E\u0434 \u0431\u0440\u043E\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F"),void a.preventDefault();$("#hiddenDateFrom").val(toJSONLocal(d.selectedDates[0])),$("#hiddenDateTo").val(toJSONLocal(d.selectedDates[1]));const b=$("#formSearch button[type=submit]");b.attr("disabled",!0),b.text("\u0418\u0434\u0435\u0442 \u043F\u043E\u0438\u0441\u043A...")}),$(".form-book-boat").on("submit",function(a){a.preventDefault();const b=$(this).find("button[type=\"submit\"]");b.attr("disabled",!0),$.ajax({type:"POST",url:$(this).attr("action"),data:new FormData($(this)[0]),processData:!1,contentType:!1,success:function(a){window.location.href=a.redirect},error:function(a){showErrorToast(a.responseJSON.message),b.attr("disabled",!1)}})}),$("#sortSelect").on("change",()=>{$("#formSearch").submit()}),$(".pagination a").on("click",function(a){const b=new Proxy(new URLSearchParams($(this).attr("href")),{get:(a,b)=>a.get(b)});$("#formSearch input[name=\"page\"]").val(b.page),$("#formSearch").submit(),a.preventDefault()})});