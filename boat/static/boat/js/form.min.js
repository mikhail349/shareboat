$(document).ready(()=>{function a(a){c?.removeLayer(d),d=new L.marker(a,{draggable:!0,icon:window.markerIcon}).on("dragend",function(a){b(a.target.getLatLng())}),c&&d?.addTo(c)}/*var addressInputTimeout;

    
    $('#addressInput').on('input', function(e) {
        //console.log(e, e.target.value);

        function onSuccess(data) {
            //if (data.display_name) {
            //    $("#addressInput").val(data.display_name);
            //    $("#addressInput").attr('disabled', false);
            //}
            
            //for (let item of data) {
            //    $("#addressList").append($("<option>").attr('value', 'item.display_name'));
            //}

            $.each(data, function(i, item) {
                //if (item.class !== 'boundary') {
                    //console.log(item);
                    $("#addressList").append($("<li>").text(item.display_name));
                //}
                
            });
        }

        clearTimeout(addressInputTimeout);
        addressInputTimeout = setTimeout(function() {
            $("#addressList").empty();
            $.ajax({
                type: 'GET',
                url: `https://nominatim.openstreetmap.org/search?q=${e.target.value}&format=json&accept-language=ru`,
                success: onSuccess
            });
        }, 300);
    })*/function b(a){function b(){$("form button[type=submit").attr("disabled",!1),c?.removeLayer(d),d=null}$("form button[type=submit").attr("disabled",!0),$(".addressLabel").text("\u0418\u0434\u0435\u0442 \u043F\u043E\u0438\u0441\u043A..."),$(".addressLabel").removeClass("text-primary"),$.ajax({type:"GET",url:`https://nominatim.openstreetmap.org/reverse?lat=${a.lat}&lon=${a.lng}&format=json&accept-language=ru`,success:function(a){a.display_name&&($(".addressLabel").text(a.display_name),$(".addressLabel").addClass("text-primary"),window.customAddress=a.display_name,$("form button[type=submit").attr("disabled",!1))},error:b})}var c,d={};if($("#typeSelect").on("change",()=>{const a=parseInt($("#typeSelect option:selected").val()),b=$("#collapseMotorBoat"),c=b.find("fieldset");window.motorBoatTypes.includes(a)?(b.collapse("show"),c.removeAttr("disabled")):(b.collapse("hide"),c.attr("disabled",""));const d=$("#collapseComfortBoat"),e=d.find("fieldset");window.comfortBoatTypes.includes(a)?(d.collapse("show"),e.removeAttr("disabled")):(d.collapse("hide"),e.attr("disabled",""))}),$("form").on("submit",async a=>{a.preventDefault();const b=$("form");if(!b.checkValidity())return;if($("#switchCustomLocation").is(":checked")&&$.isEmptyObject(d))return void showErrorToast("\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0430\u0434\u0440\u0435\u0441");showOverlayPanel();const c=new FormData(b[0]),e=$(".file-upload-wrapper img.card-img");for(let b of e){const a=$(b),d=a.attr("src"),e=a.attr("data-filename"),f=await fetch(d),g=await f.blob();e?c.append("file",g,e):c.append("file",g)}c.append("prices",JSON.stringify(window.prices)),$.isEmptyObject(d)||(c.append("custom_coordinates",JSON.stringify(d.getLatLng())),c.append("custom_address",window.customAddress));const f=b.attr("action");$.ajax({type:"POST",data:c,url:f,processData:!1,contentType:!1,success:function(a){hideOverlayPanel(),window.location.href=a.redirect},error:function(a){hideOverlayPanel(),showErrorToast(parseJSONError(a.responseJSON))}})}),0<window.customCoordinates.length){var e={lat:window.customCoordinates[0].fields.lat,lng:window.customCoordinates[0].fields.lon};a(e),$(".addressLabel").text(window.customAddress),$(".addressLabel").addClass("text-primary")}$("#addressMapModal").on("shown.bs.modal",function(){var e=[55.72524,37.62896];$.isEmptyObject(d)||(e=d.getLatLng()),c=L.map("map",{dragging:!0}).setView(e,12),$.isEmptyObject(d)||d.addTo(c),c.on("click",function(c){a(c.latlng),b(c.latlng)}),L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:"&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors"}).addTo(c)}),$("#addressMapModal").on("hidden.bs.modal",function(){c.remove(),c=null}),$("#switchCustomLocation").on("click",function(){$(this).is(":checked")?($("#baseSelect").attr("disabled",!0),$("#collapseBase").collapse("hide"),$("#collapseCustomAddress").collapse("show")):($("#collapseBase").collapse("show"),$("#collapseCustomAddress").collapse("hide"),$("#baseSelect").attr("disabled",!1))}),0<window.customCoordinates.length&&$("#switchCustomLocation").trigger("click")});