$(document).ready(()=>{/*class InputValidator {
        constructor(input, tooltip) {
            this.input = input;
            this.tooltip = $(input).siblings(".invalid-tooltip");
            this.errorsList = [];
        }

        addError(msg, f) {
            if (f(this.input.val())) {
                this.errorsList.push(msg);
            }
        }

        validate() {
            const error = this.errorsList.join("\n");
            this.input[0].setCustomValidity(error);
            this.tooltip.text(error);            
        }
    }

    $("input[name=name]").on("input", (e) => {
        const length = new InputValidator($("input[name=name]"));
        length.addError("Введите название лодки", (val) => !val);
        length.addError("Слишком длинное название", (val) => val.length > 255);
        length.validate();
    })

    $("input[name=length]").on("input", (e) => {
        const length = new InputValidator($("input[name=length]"));
        length.addError("Укажите длину лодки", (val) => !val || val < 0.1);
        length.addError("Слишком длинная лодка", (val) => val > 999.9);
        length.validate();
    })

    $("input[name=width]").on("input", () => {
        const length = new InputValidator($("input[name=width]"));
        length.addError("Укажите ширину лодки", (val) => !val || val < 0.1);
        length.addError("Слишком широкая лодка", (val) => val > 99.9);
        length.validate();
    })

    $("input[name=draft]").on("input", () => {
        const length = new InputValidator($("input[name=draft]"));
        length.addError("Укажите осадку лодки", (val) => !val || val < 0.1);
        length.addError("Слишком большая осадка", (val) => val > 9.9);
        length.validate();
    })

    $("input[name=capacity]").on("input", () => {
        const length = new InputValidator($("input[name=capacity]"));
        length.addError("Укажите вместимость лодки", (val) => !val || val == 0);
        length.addError("Слишком большая вместимость лодки", (val) => val > 99);
        length.validate();
    })*/$("#typeSelect").on("change",()=>{const a=parseInt($("#typeSelect option:selected").val()),b=$("#collapseMotorBoat"),c=b.find("fieldset");window.motorBoatTypes.includes(a)?(b.collapse("show"),c.removeAttr("disabled")):(b.collapse("hide"),c.attr("disabled",""));const d=$("#collapseComfortBoat"),e=d.find("fieldset");window.comfortBoatTypes.includes(a)?(d.collapse("show"),e.removeAttr("disabled")):(d.collapse("hide"),e.attr("disabled",""))}),$("form").on("submit",async a=>{a.preventDefault();const b=$("form");if(!b.checkValidity())return;showOverlayPanel();const c=new FormData(b[0]),d=$(".file-upload-wrapper img.card-img");for(let b of d){const a=$(b),d=a.attr("src"),e=a.attr("data-filename"),f=await fetch(d),g=await f.blob();e?c.append("file",g,e):c.append("file",g),console.log(d)}const e=b.attr("action");$.ajax({type:"POST",data:c,url:e,processData:!1,contentType:!1,success:function(a){hideOverlayPanel(),window.location.href=a.redirect},error:function(a){console.log(a),hideOverlayPanel(),showErrorToast(a.responseJSON.message||a.data)}})})});