function FilesList(a){async function b(a){const b=$("form button[type=submit]");b.attr("disabled",!0);try{let b=[];const c=await axios.get(`/boats/api/get_files/${a}/`);for(let a of c.data.data){const c=await fetch(a.url),d=await c.blob();d.name=a.filename,b.push({blob:d,url:URL.createObjectURL(d)})}g(b)}finally{b.attr("disabled",!1)}}function c(){return 0<h}async function d(a){const b=[...f];for(let c of a)b.push({blob:c,url:URL.createObjectURL(c)});g(b)}async function e(a){let b=[...f];URL.revokeObjectURL(b[a].url),b.splice(a,1),g(b)}const[f,g]=React.useState([]),[h,i]=React.useState(0),j=React.createRef(),k={height:"150px"};return React.useEffect(()=>{a.boatId&&b(a.boatId)},[]),/*#__PURE__*/React.createElement("div",null,/*#__PURE__*/React.createElement("input",{ref:j,type:"file",name:"hidden_files",accept:"image/*",multiple:!0,hidden:!0,onChange:function(a){d(a.target.files),j.current.value=null}}),/*#__PURE__*/React.createElement("div",{className:"row g-3 mb-3"},f.map((a,b)=>/*#__PURE__*/React.createElement("div",{key:b,className:"col-md-4 col-lg-3"},/*#__PURE__*/React.createElement("div",{className:"card box-shadow text-end"},/*#__PURE__*/React.createElement("img",{src:a.url,className:"card-img",style:k,"data-filename":a.blob.name}),/*#__PURE__*/React.createElement("div",{className:"card-img-overlay"},/*#__PURE__*/React.createElement("div",{className:"btn-group"},/*#__PURE__*/React.createElement("button",{type:"button",className:"btn btn-sm btn-danger",onClick:()=>e(b)},"\u0423\u0434\u0430\u043B\u0438\u0442\u044C")))))),!window.isMobile()&&/*#__PURE__*/React.createElement("div",{className:"col-md-4 col-lg-3"},/*#__PURE__*/React.createElement("div",{className:`card shadow-none text-end border border-dashed photo-upload-wrapper ${c()?"photo-upload-wrapper-hover":""}`,onDragEnter:function(a){a.preventDefault(),i(a=>a+1)},onDragLeave:function(a){a.preventDefault(),i(a=>a-1)},onDrop:function(a){a.preventDefault(),i(0),d(a.dataTransfer.files)},onDragOver:a=>a.preventDefault()},/*#__PURE__*/React.createElement("div",{className:"card-img d-flex justify-content-center align-items-center text-center",style:k},c()?/*#__PURE__*/React.createElement("span",{className:"text-primary"},"\u041E\u0442\u043F\u0443\u0441\u0442\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0444\u043E\u0442\u043E"):/*#__PURE__*/React.createElement("span",{className:"text-muted"},"\u041F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0444\u043E\u0442\u043E \u0441\u044E\u0434\u0430 \u0438\u043B\u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0444\u043E\u0442\u043E\""))))),/*#__PURE__*/React.createElement("div",{class:"row row-cols-lg-auto align-items-center"},/*#__PURE__*/React.createElement("div",{class:"col"},/*#__PURE__*/React.createElement("button",{type:"button",className:"btn btn-outline-primary w-100",onClick:()=>j.current.click()},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0444\u043E\u0442\u043E"))))}const appPhotos=document.querySelector("#react_app_photos");ReactDOM.render(/*#__PURE__*/React.createElement(FilesList,{boatId:$(appPhotos).attr("data-boat-id")}),appPhotos);