$(document).ready(()=>{$("img.avatar").on("click",()=>{$("input[name=avatar]").trigger("click")});const a=$("img.avatar").attr("src");a.replace(/^.*[\\\/]/,"");$("input[name=avatar]").on("change",a=>{if(a.target.files&&a.target.files[0]){const b=a.target.files[0],c=new FormData;c.set("avatar",b,b.name),$.ajax({type:"POST",data:c,url:"/user/api/update_avatar/",processData:!1,contentType:!1,success:a=>{showSuccessToast("\u0410\u0432\u0430\u0442\u0430\u0440 \u0438\u0437\u043C\u0435\u043D\u0451\u043D."),$("img.avatar").attr("src",a.data)}//error: onError
})}}),$("#btnGenerateTgCode").on("click",function(a){a.preventDefault(),$btn=$(this),$btn.attr("disabled",!0),$.ajax({type:"GET",url:"/user/api/generate_telegram_code/",success:function(a){$btn.remove(),$("#tgAuth").remove(),$("#tgCode").html(a.message)},error:function(){$btn.attr("disabled",!1)}})}),$("#formProfile").on("submit",async a=>{function b(){hideOverlayPanel(),showSuccessToast();const a=$("input[name=first_name]").val(),b=$("#formProfile input[name=email]").val();$("#navbarDropdownUserProfile span").text(a||b)}function c(a){hideOverlayPanel(),showErrorToast(parseJSONError(a.responseJSON))}a.preventDefault();const d=$("#formProfile");if(d.checkValidity()){const a=new FormData(d[0]);showOverlayPanel(),$.ajax({type:"POST",data:a,url:"/user/api/update/",processData:!1,contentType:!1,success:b,error:c})}})});