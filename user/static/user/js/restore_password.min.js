$(document).ready(()=>{function a(){const a=new Date;var e=b.getTime()-a.getTime(),f=Math.round(e/1e3);if(0>=f)return clearInterval(c),$("#alertEmail").hide(),void d.attr("disabled",!1);const g=Math.floor(f/3600),h=Math.floor((f-3600*g)/60),i=f-3600*g-60*h;let j="";0<g&&(j+=`${g} ч.`),0<h&&(j+=` ${h} мин.`),0<i&&(j+=` ${i} сек.`),j=j.trim(),$("#alertEmail").show(),$("#alertEmail").html(`Письмо отправлено на почту. Повторная отправка возможна через <span style='word-wrap:break-word; display:inline-block;' >${j}</span>`)}var b=null,c=null;const d=$("form fieldset");$("form").on("submit",async f=>{function e(d){b=new Date(d.next_email_datetime),a(),c=setInterval(a,1e3)}function g(a){showErrorToast(a.responseJSON?.message),d.attr("disabled",!1)}f.preventDefault();const h=$("form");if(h.checkValidity()){const a=new FormData(h[0]);d.attr("disabled",!0),$.ajax({type:"POST",url:"/user/api/send_restore_password_email/",data:a,processData:!1,contentType:!1,success:e,error:g})}})});